@using FunTrophy.Shared.Model
<div style="background-color: @(CurrentColor == null ? "white" : CurrentColor.Code)"></div>
@if (isOpen)
{
    <div id="color-list">
        <ul>
            @foreach (var color in Colors)
            {
                <li style="background-color:@color.Code"></li>
            }
        </ul>
    </div>
}


@code {
    private bool isOpen { get; set; }

    private ColorDto? CurrentColor { get; set; }

    private List<ColorDto> _colors = new List<ColorDto>();
    [Parameter]
    public List<ColorDto> Colors
    {
        get => _colors;
        set
        {
            if (value == _colors)
                return;
            _colors = value;
            if (_colors.Any())
                CurrentColor = _colors.First();
        }
    }

    [Parameter]
    public EventCallback<int> OnCurrentColorChanged { get; set; }

    private void CurrentColorChanged(ColorDto color)
    {
        CurrentColor = color;
        OnCurrentColorChanged.InvokeAsync(color.Id);
    }

}
